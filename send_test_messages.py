
#!/usr/bin/env python3
"""
ุฅุฑุณุงู ุฑุณุงุฆู ุชุฌุฑูุจูุฉ ุจุงุณุชุฎุฏุงู ุจูุช ุงูุฅุฑุณุงู ุงูุฌุฏูุฏ
"""

import asyncio
import aiohttp
from utils.logger import setup_logger

logger = setup_logger(__name__)

# ุจูุงูุงุช ุงูุจูุช
SENDER_BOT_TOKEN = "7613162592:AAFnqn3_1lPPClVUa1jckOXj44C2MGCVLHs"
# ููุงุฉ ุงูุฃุฑุดูู ุงููุญูุฏุฉ (ูู ุงูููุงุฉ ุงูุฑุฆูุณูุฉ ูููุนุงูุฌุฉ ูุงูุฃุฑุดูุฉ)
MAIN_PROCESSING_CHANNEL_ID = "-1002711636474"  # Real_estate Archive Channel

# ุงูุฑุณุงุฆู ุงูุชุฌุฑูุจูุฉ
TEST_MESSAGES = [
    """
๐ ุนูุงุฑ ููุฅูุฌุงุฑ - ุงูุชุฌูุน ุงูุฎุงูุณ

ุงูููุทูุฉ: ุงุญูุงุก ุชุฌูุน
ุงูููุน: ุดูุฉ ุณูููุฉ
ุงููุณุงุญุฉ: 120 ูุชุฑ ูุฑุจุน
ุงูุฏูุฑ: ุงูุซุงูุซ
ุงูุณุนุฑ: 25000 ุฌููู ุดูุฑูุงู
ุงูุญุงูุฉ: ููุฑูุด

ุงููููุฒุงุช:
- ููููู
- ููู ููุชูุญ  
- ุงุณุงูุณูุฑ
- ุญุฏููู

ููุชูุงุตู: ุฃุญูุฏ ูุญูุฏ - 01234567890
ุงููุงูู: ุณุงุฑุฉ ุฃุญูุฏ - 01111111111
ูุชููุฑ ุตูุฑ ูููุญุฏุฉ

ุงูุนููุงู: ุดุงุฑุน ุงูุชุณุนูู ุงูุดูุงููุ ุงูุชุฌูุน ุงูุฎุงูุณุ ุงููุงูุฑุฉ ุงูุฌุฏูุฏุฉ
ุชุจุน ุจูุจู
ูุชุงุญ
    """,
    """
๐ก ูููุง ุฏูุจููุณ ููุฅูุฌุงุฑ - ุงูุดุฑูู

ุงูููุทูุฉ: ุงูุฏูุณ
ุงูููุน: ูููุง ุฏูุจููุณ  
ุงููุณุงุญุฉ: 250 ูุชุฑ ูุฑุจุน
ุงูุฃุฏูุงุฑ: ุฏูุฑ ุฃุฑุถู + ุฃูู
ุงูุณุนุฑ: 45000 ุฌููู ุดูุฑูุงู
ุงูุญุงูุฉ: ูุงุถู

ุงููููุฒุงุช:
- ุญุฏููู ุฎุงุตุฉ
- ุชุดุทูุจ ุณูุจุฑ ูููุณ
- ูุฏุฎู ุฎุงุต

ููุชูุงุตู: ูุงุทูุฉ ุนูู - 01987654321
ุงููุงูู: ูุญูุฏ ุญุณู - 01222222222
ุจุฏูู ุตูุฑ ุญุงููุงู

ุงูุนููุงู: ุงูููุทูุฉ ุงูุซุงููุฉุ ุงูุฏูุณ
ุชุจุน ููุณู ุนูุงุฏ
ุบูุฑ ูุชุงุญ
    """,
    """
๐ข ุดูุฉ ุชูููู - ุฌุงุฑุฏูููุง ูุงูุชุณ

ุงูููุทูุฉ: ุฌุงุฑุฏูููุง ูุงูุชุณ
ุงูููุน: ุดูุฉ
ุงููุณุงุญุฉ: 180 ูุชุฑ
ุงูุฏูุฑ: ุฏูุฑ ุฑุงุจุน
ุงูุณุนุฑ: 1500000 ุฌููู
ุงูุญุงูุฉ: ุชูููู

ุงููููุฒุงุช:
- ูุณุฌูู ุดูุฑ ุนูุงุฑู
- ุงุณุงูุณูุฑ
- ููู ุฌุงุฑุฏู
- ุชูุณูุท

ููุชูุงุตู: ูุญููุฏ ุณุงูู - 01555666777
ุงููุงูู: ุฃููุฑุฉ ุฎุงูุฏ - 01333444555
ุจุตูุฑ ูุชุงุญุฉ

ุงูุนููุงู: ููุจููุฏ ุฌุงุฑุฏูููุง ูุงูุชุณุ ุงูุญู ุงูุฎุงูุณ
ุชุจุน ูุญููุฏ ุณุงูู
ูุชุงุญ
    """
]

async def send_test_message(session, text, message_num):
    """ุฅุฑุณุงู ุฑุณุงูุฉ ูุงุญุฏุฉ"""
    
    url = f"https://api.telegram.org/bot{SENDER_BOT_TOKEN}/sendMessage"
    data = {
        "chat_id": MAIN_PROCESSING_CHANNEL_ID,
        "text": text,
        "parse_mode": "HTML"
    }
    
    try:
        async with session.post(url, json=data) as response:
            if response.status == 200:
                result = await response.json()
                if result.get("ok"):
                    logger.info(f"โ ุชู ุฅุฑุณุงู ุงูุฑุณุงูุฉ {message_num} ุจูุฌุงุญ")
                    return True
                else:
                    logger.error(f"โ ุฎุทุฃ ูู ุฅุฑุณุงู ุงูุฑุณุงูุฉ {message_num}: {result.get('description')}")
            else:
                logger.error(f"โ ุฎุทุฃ HTTP {response.status} ูู ุฅุฑุณุงู ุงูุฑุณุงูุฉ {message_num}")
                
    except Exception as e:
        logger.error(f"โ ุฎุทุฃ ูู ุฅุฑุณุงู ุงูุฑุณุงูุฉ {message_num}: {e}")
    
    return False

async def send_all_test_messages():
    """ุฅุฑุณุงู ุฌููุน ุงูุฑุณุงุฆู ุงูุชุฌุฑูุจูุฉ"""
    
    logger.info("๐ ุจุฏุก ุฅุฑุณุงู ุงูุฑุณุงุฆู ุงูุชุฌุฑูุจูุฉ...")
    logger.info(f"๐ฑ ุงูุจูุช: {SENDER_BOT_TOKEN[:20]}...")
    logger.info(f"๐ข ุงูููุงุฉ ุงูุฑุฆูุณูุฉ: {MAIN_PROCESSING_CHANNEL_ID}")
    logger.info("=" * 50)
    
    async with aiohttp.ClientSession() as session:
        sent_count = 0
        
        for i, message in enumerate(TEST_MESSAGES, 1):
            logger.info(f"๐ค ุฅุฑุณุงู ุงูุฑุณุงูุฉ {i}/{len(TEST_MESSAGES)}...")
            
            success = await send_test_message(session, message, i)
            if success:
                sent_count += 1
            
            # ุชููู ูุตูุฑ ุจูู ุงูุฑุณุงุฆู
            await asyncio.sleep(2)
        
        logger.info("=" * 50)
        logger.info(f"โ ุชู ุฅุฑุณุงู {sent_count}/{len(TEST_MESSAGES)} ุฑุณุงูุฉ ุจูุฌุงุญ")
        
        if sent_count > 0:
            logger.info("๐ ููููู ุงูุขู ูุญุต ุงูููุงุฉ ุงูุฑุฆูุณูุฉ ูุฑุคูุฉ ุงูุฑุณุงุฆู")
            logger.info("๐ ุงููุธุงู ุณูุนุงูุฌ ูุฐู ุงูุฑุณุงุฆู ููุฃุฑุดููุง ุชููุงุฆูุงู")

async def main():
    """ุงูุฏุงูุฉ ุงูุฑุฆูุณูุฉ"""
    print("๐ค ุฅุฑุณุงู ุฑุณุงุฆู ุชุฌุฑูุจูุฉ ุฅูู ุงูููุงุฉ ุงูุฑุฆูุณูุฉ ูููุนุงูุฌุฉ")
    print("=" * 50)
    
    await send_all_test_messages()
    
    print("\nุชู ุงูุงูุชูุงุก! ๐")

if __name__ == "__main__":
    asyncio.run(main())
